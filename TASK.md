## MVPスコープ/要件
- 対象: メモ/議事録/防災マニュアルの見本PDFから、同等の防災マニュアルを作成する。
- 入力: メモ/議事録/見本PDF（スキャン可）＋不足情報は1回のフォーム入力で補完。
- 出力: 最終的な防災マニュアルPDF（HTML→PDF生成）。
- フロー: 入力→解析→`{ msg, form }`返却→ユーザー補完→PDF生成。
- UI: 見本PDFアップロード、質問表示、回答送信、進捗/完了表示。
- 非機能: 日本語対応、データ保持/削除ポリシー、失敗時の再試行/エラー表示。

## タスクリスト
- MVPのスコープ/前提を定義（対応言語、出力PDF形式、単一テナント、認証有無）。
- 既存のクライアント/サーバーフローを確認し、新MVPの組み込み位置を整理（現行の`/chat`エンドポイント + UI）。
- PDFアップロードのパイプライン追加（サイズ上限、保存先、クリーンアップ方針）。
- スキャンPDFのOCR/抽出を実装（ライブラリ/サービス選定、日本語対応）。
- 「必要入力」と「収集済みデータ」のスキーマ設計（マニュアル章立ての型）。
- 見本PDFから必要項目を抽出するプロンプト/システム指示を設計。
- 見本PDFを解析し`{ msg, form }`を返すバックエンドAPIを追加。
- 追加質問は1回のみの前提で、必要情報の抽出・質問設計を最適化。
- フォーム回答＋文脈を受け取り、最終生成へ進むバックエンドAPIを追加。
- 収集情報から最終マニュアルPDFを生成するバックエンドAPIを追加。
- マニュアル用HTMLテンプレート生成（既存のGenerating-HTML-by-Geminiロジックを参照）。
- HTML→PDFレンダリング実装（ヘッドレスブラウザ or PDFライブラリ）。
- フロントエンドの導線実装：見本PDFアップロード → 質問表示 → 回答送信 → 反復。
- 複数ステップ会話＋フォームスキーマ描画の状態管理を実装。
- バリデーション/エラーハンドリング追加（不足項目、OCR失敗、モデルエラー）。
- プロンプト/判断の監査ログを追加（任意だがデバッグに有用）。
- 設定/シークレット管理（GEMINI_API_KEY、OCRキー、PDFレンダラ依存）。
- テスト追加：API契約、サンプルPDF解析、PDF生成の回帰。
- README/ドキュメント更新（セットアップ、環境変数、実行手順）。
